{% import 'output_template.html' as out %}

{% macro render_renther(person) %}
<div class="col-md-6 mb-5">
    <div class="card mx-2 rounded">
        <div class="card-body d-flex align-items-center justify-content-between">
            <div class="text-start mx-2">
                <h5 class="card-title mt-2"> {{ person[1] }}, <small class="text-secondary d-md-none d-lg-inline">{{ person[2] }}</small></h5>
                <div class="card-text  mb-2 text-secondary"> Контракт &numero;<b>{{person[0]}}</b> <small class="d-md-none d-lg-inline">от <b>{{person[3]}}</b></small></div>
            </div>
            <form action="" method="post">
                <button type="submit" class="btn btn-outline-primary m-2 px-3 align-center" name="history_id" value="{{person[0]}}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                    </svg>
                    Подробнее
                </button>
            </form>
        </div>
    </div>
</div>
{% endmacro %}

{% macro render_owner(person, hide=False) %}
    <div class="card mx-2 rounded d-flex justify-content-between flex-row">
        {% if hide %}
        <a class="btn d-none d-sm-flex align-self-stretch align-items-center px-5" href="">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-circle mt-1 me-2" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
            </svg>
            Назад
        </a>
        {% endif %}
        <div class="card-body m-3 d-flex flex-column text-start {% if hide %} text-end {% endif %} justify-content-between">
            <div class="card-title d-flex flex-wrap {% if hide %} justify-content-end {% endif %}">
                <h5 class="me-sm-3 me-0">{{ person[1] }},</h5>
                <div class="ms-3 ms-sm-0">{{ person[3] }}</div>
            </div>

            <div class="card-text  mb-2 text-secondary"> {{ person[2] }}</div>
            <div class="card-text">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-outbound-fill" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511zM11 .5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V1.707l-4.146 4.147a.5.5 0 0 1-.708-.708L14.293 1H11.5a.5.5 0 0 1-.5-.5z"/>
                </svg>
                <a href="tel:+7{{person[4]}}">{{out.phone(person[4] | string)}}</a>
            </div>
            <form class="bg-white d-flex {% if hide %} d-none {% endif %}" action="" method="post">
                <button type="submit" class="btn btn-outline-primary ms-auto me-3 my-2" name="ow_id" value="{{person[0]}}">
                    Билборды
                </button>
            </form>
        </div>
    </div>
{% endmacro %}

{% macro out_table(schema, result) %}
    <table class="table">
        <thead>
             <tr>
                {% for column in schema%}
                    <th  class="{% if (column|length)>4 and loop.index0 in [2,3,4] %} d-none d-md-table-cell {% endif %}" scope="col">{{column}}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for line in result %}
            <tr>
                {% for column in line %}
                {% if loop.index0 in [2,3,4] %}<td class="d-none d-md-table-cell">{% else %}<td>{% endif %} {{column}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endmacro %}